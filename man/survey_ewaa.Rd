% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/survey_ewaa.R
\name{survey_ewaa}
\alias{survey_ewaa}
\title{Survey EWAA WTAGE and NAGE tables (optionally split by sex)}
\usage{
survey_ewaa(
  con,
  species = 21720,
  region = "BS",
  maxage = 10,
  split_sex = FALSE,
  year_min = 2007
)
}
\arguments{
\item{con}{A DBI connection to the AFSC database.}

\item{species}{Survey species code (numeric/integer).}

\item{region}{Region code(s) for the survey SQL (character; can be length > 1).}

\item{maxage}{Plus-group age (ages > maxage are pooled to maxage).}

\item{split_sex}{Logical. If TRUE, return separate tables for females (F) and males (M),
and fit the GAM/LM weight-fill models within each sex. If FALSE (default), fit a single
model on combined data.}
}
\value{
If split_sex=FALSE: list(S_WTAGE=..., S_NAGE=...).
If split_sex=TRUE: list(F=list(S_WTAGE=..., S_NAGE=...), M=list(S_WTAGE=..., S_NAGE=...)).
}
\description{
Pull survey age/length/weight data using srv_ages.sql from int/sql, fill missing
weights with a GAM W~L model (default mgcv settings; fallback to LM if GAM fails),
and return Stock Synthesis-style wide matrices for weights-at-age (WTAGE) and
counts-at-age (NAGE). Optionally split outputs by sex (F and M).
}
\details{
Uses package SQL helpers \code{sql_read()}, \code{sql_filter()}, and \code{sql_run()} from sql_utils.R.
}
