% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fit_seasonal_growth_model.R
\name{fit_season_growth_model}
\alias{fit_season_growth_model}
\title{Fit delta-length (season-to-season) growth translation model}
\usage{
fit_season_growth_model(
  fish_al,
  target_season,
  maxage = 10L,
  gear_mode = c("combined", "by_gear"),
  sex_mode = c("combined", "split"),
  min_n_cell = 10L,
  shrink_k = 30
)
}
\arguments{
\item{fish_al}{Fish-level (row-level) age-length data.
Must include YEAR, QUARTER, AGE, LENGTH.
Optionally includes GEAR2 and/or SEX.}

\item{target_season}{}

\item{maxage}{Plus-group age; ages > maxage are pooled to maxage.}

\item{gear_mode}{"combined" or "by_gear". If "by_gear", requires GEAR2.}

\item{sex_mode}{"combined" or "split". If "split", requires SEX coded F/M.}

\item{min_n_cell}{Minimum n for a (YEAR,AGE,QUARTER,...) cell to use mostly its own mean.
Smaller cells will be shrunk toward broader mean.}

\item{shrink_k}{Nonnegative shrinkage constant. Larger => more shrinkage when n is small.
Weight on cell mean is n/(n+shrink_k).}
}
\value{
A list with:
\itemize{
\item deltas: data.table with keys YEAR, AGE, QUARTER (+ optional GEAR2/SEX),
and columns MEANL_Q, MEANL_QSTAR, DELTA_L, N_Q
\item target_qtr: the target quarter used
\item gear_mode, sex_mode, maxage
}
}
\description{
Estimates mean length-at-age by season (optionally by gear/sex), then computes
delta length to translate observed season lengths to a target season q*:
delta_L(age, q -> q*) = meanL(age, q*) - meanL(age, q)
}
\details{
Includes simple, robust shrinkage for sparse cells by blending cell means toward
broader means (age+quarter pooled), weighted by sample size.
}
