% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fishery_ewaa.R
\name{fishery_ewaa}
\alias{fishery_ewaa}
\title{Fishery EWAA WTAGE and NAGE tables (optionally split by sex)}
\usage{
fishery_ewaa(
  con,
  species = 202,
  region = c("AI", "BS", "GOA", "BSWGOA"),
  maxage = 10,
  split_sex = FALSE,
  year_min = 2007,
  trim_outliers = TRUE,
  trim_q = c(0.01, 0.99),
  min_strata_n = 30
)
}
\arguments{
\item{con}{A DBI connection to the AKFIN database.}

\item{species}{Fishery species code (numeric/integer; e.g., 202).}

\item{region}{Either:
(1) region code(s) among c("AI","BS","GOA","BSWGOA") (default), OR
(2) a numeric vector of NMFS areas directly (will be used as-is).}

\item{maxage}{Plus-group age (ages > maxage are pooled to maxage).}

\item{split_sex}{Logical. If TRUE, fit/predict within sex and return F/M tables.}

\item{year_min}{Minimum YEAR to include (default 2007 like your older scripts).}

\item{trim_outliers}{Logical. If TRUE, use qgam 0.01/0.99 envelopes to trim weights.}

\item{trim_q}{Numeric length-2 quantiles used when trim_outliers=TRUE.}
}
\value{
If split_sex=FALSE: list(F_WTAGE=..., F_NAGE=...).
If split_sex=TRUE: list(F=list(F_WTAGE=..., F_NAGE=...), M=list(F_WTAGE=..., F_NAGE=...)).
}
\description{
Pull fishery age/length/weight data using dom_age_wt2.sql from int/sql, optionally
trim extreme weights using quantile GAMs, fit a Gamma(log) GAM to predict weights
for aged fish, and return Stock Synthesis-style wide matrices for weights-at-age
(WTAGE) and counts-at-age (NAGE). Optionally split outputs by sex (F and M).
}
\details{
Uses package SQL helpers \code{sql_read()}, \code{sql_filter()}, and \code{sql_run()}.
}
